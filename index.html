// API.js

// Function to fetch user information from the external website
async function fetchUserFromExternalWebsite(username) {
    try {
        const response = await fetch(`https://user-aim.page-home.workers.dev/checkuser?username=${username}`);
        const data = await response.json();

        // Return user information if user exists, otherwise return null
        return data.exists ? data : null;
    } catch (error) {
        console.error('Error fetching user information:', error);
        return null;
    }
}

// Function to create and show a div with the fetched username and account status
async function showUsernameDiv() {
    // Replace 'exampleUsername' with the actual username you want to check
    const usernameToCheck = 'exampleUsername';

    // Fetch the user information from the external website
    const userInformation = await fetchUserFromExternalWebsite(usernameToCheck);

    // Create a div to display the username and account status
    const usernameDiv = document.createElement('div');
    usernameDiv.id = 'usernameDiv';

    if (userInformation) {
        // User exists, display the username and account status
        usernameDiv.textContent = `Logged in as: ${userInformation.username} (Account Exists)`;
    } else {
        // User does not exist, display a message
        usernameDiv.textContent = `No account found for ${usernameToCheck}`;
    }

    // Style the div (you can customize these styles)
    usernameDiv.style.position = 'fixed';
    usernameDiv.style.bottom = '10px';
    usernameDiv.style.left = '10px';
    usernameDiv.style.backgroundColor = '#3498db';
    usernameDiv.style.color = '#fff';
    usernameDiv.style.padding = '10px';
    usernameDiv.style.borderRadius = '5px';

    // Append the div to the body
    document.body.appendChild(usernameDiv);
}

// Automatically show the username div when the page loads
document.addEventListener('DOMContentLoaded', showUsernameDiv);
